name: CI Check

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]
  workflow_dispatch:

jobs:
  build_check:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: "3.10"

      - name: Install Python Formatters (autoflake, isort, black)
        run: |
          pip install autoflake isort black

      - name: Python Formatting Check
        run: |
          echo "Running autoflake..."
          autoflake --remove-all-unused-imports --recursive --ignore-init-module-imports --remove-unused-variables --exit-zero-even-if-changed .

          echo "Running isort..."
          isort . --check-only

          echo "Running black..."
          black . --check

      - name: Install Prettier
        run: |
          npm install --global prettier

      - name: Prettier Formatting Check
        run: |
          echo "Checking formatting with Prettier..."
          prettier --check "**/*.{js,jsx,ts,tsx,json,yml,yaml,html,css,md}"

      - name: Finalize Check
        run: echo "All formatting checks completed."
